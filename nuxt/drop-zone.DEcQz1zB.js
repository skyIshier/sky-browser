import{n as v,r as p,q as h,o as k,c as g,a,t as D,bz as x,O as b,_ as A}from"./entry.BgnvDUI5.js";import{b as C}from"./index.ely8kfid.js";const I={class:"dropText"},W=["accept"],T=v({__name:"drop-zone",props:{type:{},prompt:{default:"Drop File"},accept:{default:"OK"},reject:{default:"Invalid!"}},emits:["file"],setup(f,{emit:d}){const c=d,o=f,i=p(),s=p(),t=p("dropWait"),_=h(()=>t.value==="dropWait"?o.prompt:t.value==="dropAccept"?o.accept:o.reject);async function m(e){if(t.value="dropWait",e===null||!l(e.map(r=>r.type)))return;const n=e[0];c("file",n)}C(i,{onDrop:m,dataTypes(e){return l(e)?(t.value="dropAccept",!0):(t.value="dropDeny",!0)},onLeave:()=>t.value="dropWait"});function l(e){return o.type===void 0?!0:e.length===1&&e[0]===o.type}function u(){var e;(e=s.value)==null||e.click()}function y(e){const n=e.target;if(n.files&&n.files.length>0){const r=n.files[0];if(o.type&&r.type!==o.type){t.value="dropDeny",setTimeout(()=>{t.value="dropWait"},1e3);return}c("file",r),n.value=""}}return(e,n)=>(k(),g("div",{ref_key:"dropZoneRef",ref:i,class:b(["dropZone",t.value]),onClick:u},[a("span",I,D(_.value),1),a("input",{ref_key:"fileInput",ref:s,type:"file",style:{display:"none"},onChange:y,accept:o.type},null,40,W),a("button",{onClick:x(u,["stop"]),class:"mobile-upload-btn"}," 选择 APK 文件 ")],2))}}),B=A(T,[["__scopeId","data-v-1a91f0d2"]]);export{B as _};
