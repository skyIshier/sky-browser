import{u as Ue}from"./apk-store.RSVZAT-b.js";import{a7 as F,ar as Qe,as as Be,a6 as j,ah as oe,P as et,at as tt,au as st,av as Fe,y as nt,aw as it,S as se,ax as rt,ay as ot,az as at,aA as Te,aB as le,aC as lt,aD as ct,aE as me,aF as ut,D as ft,aG as Z,aH as ne,aI as dt,aJ as ht,aK as gt,aL as pt,aM as mt,aN as vt,$ as yt,aO as xt,aP as Tt,aQ as bt,aR as wt,aS as St,H as Mt,a5 as k,a9 as V,b as p,aT as _t,aU as ve,q as R,aV as ae,aW as Pe,aX as ie,aY as Et,aZ as N,r as $,h as D,a_ as It,a$ as Rt,j as ke,L as be,b0 as At,F as Nt,ac as K,N as Lt,aa as Ct,ab as Ut,a8 as Bt,b1 as Ft,b2 as Pt,a0 as Oe,b3 as kt,b4 as Ot,b5 as zt,b6 as Dt,b7 as Vt,f as Gt,n as ze,o as Y,J as W,w as re,u as B,v as ce,a as we,d as Ht,t as ue,_ as De,b8 as jt,b9 as Kt}from"./entry.BgnvDUI5.js";import{u as Yt,p as Wt,c as qt,a as $t}from"./ui-store.Cdca3RGT.js";import{m as ye,b as Xt,c as Jt,d as Ve,e as Ge,f as He,g as Zt,h as Qt,i as es,j as ts,k as fe,V as O}from"./VGrid.DBcNMJ2Y.js";import{_ as ss}from"./drop-zone.DEcQz1zB.js";import{_ as ns}from"./drop-overlay.DoPsmUuQ.js";import{u as Se}from"./index.ely8kfid.js";import"./index._BGoy-tc.js";import"./DataView.bL8bw3ed.js";function is(s){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"div",t=arguments.length>2?arguments[2]:void 0;return F()({name:t??Qe(Be(s.replace(/__/g,"-"))),props:{tag:{type:String,default:e},...j()},setup(i,n){let{slots:o}=n;return()=>{var r;return oe(i.tag,{class:[s,i.class],style:i.style},(r=o.default)==null?void 0:r.call(o))}}})}const Me=is("v-spacer","div","VSpacer");let Q,de,H,ee;function he(s,e=1/0,t=null){de||(de=new et(2,2,1,1)),H||(H=new tt({uniforms:{blitTexture:new st(s)},vertexShader:`
            varying vec2 vUv;
            void main(){
                vUv = uv;
                gl_Position = vec4(position.xy * 1.0,0.,.999999);
            }`,fragmentShader:`
            uniform sampler2D blitTexture; 
            varying vec2 vUv;

            void main(){ 
                gl_FragColor = vec4(vUv.xy, 0, 1);
                
                #ifdef IS_SRGB
                gl_FragColor = LinearTosRGB( texture2D( blitTexture, vUv) );
                #else
                gl_FragColor = texture2D( blitTexture, vUv);
                #endif
            }`})),H.uniforms.blitTexture.value=s,H.defines.IS_SRGB=s.colorSpace==Fe,H.needsUpdate=!0,ee||(ee=new nt(de,H),ee.frustrumCulled=!1);const i=new it,n=new se;n.add(ee),t||(t=Q=new rt({antialias:!1})),t.setSize(Math.min(s.image.width,e),Math.min(s.image.height,e)),t.clear(),t.render(n,i);const o=new ot(t.domElement);return o.minFilter=s.minFilter,o.magFilter=s.magFilter,o.wrapS=s.wrapS,o.wrapT=s.wrapT,o.name=s.name,Q&&(Q.dispose(),Q=null),o}const _e={POSITION:["byte","byte normalized","unsigned byte","unsigned byte normalized","short","short normalized","unsigned short","unsigned short normalized"],NORMAL:["byte normalized","short normalized"],TANGENT:["byte normalized","short normalized"],TEXCOORD:["byte","byte normalized","unsigned byte","short","short normalized","unsigned short"]};class xe{constructor(){this.pluginCallbacks=[],this.register(function(e){return new gs(e)}),this.register(function(e){return new ps(e)}),this.register(function(e){return new ys(e)}),this.register(function(e){return new xs(e)}),this.register(function(e){return new Ts(e)}),this.register(function(e){return new bs(e)}),this.register(function(e){return new ms(e)}),this.register(function(e){return new vs(e)}),this.register(function(e){return new ws(e)}),this.register(function(e){return new Ss(e)}),this.register(function(e){return new Ms(e)})}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,i,n){const o=new hs,r=[];for(let a=0,l=this.pluginCallbacks.length;a<l;a++)r.push(this.pluginCallbacks[a](o));o.setPlugins(r),o.write(e,t,n).catch(i)}parseAsync(e,t){const i=this;return new Promise(function(n,o){i.parse(e,n,o,t)})}}const x={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,BYTE:5120,UNSIGNED_BYTE:5121,SHORT:5122,UNSIGNED_SHORT:5123,INT:5124,UNSIGNED_INT:5125,FLOAT:5126,ARRAY_BUFFER:34962,ELEMENT_ARRAY_BUFFER:34963,NEAREST:9728,LINEAR:9729,NEAREST_MIPMAP_NEAREST:9984,LINEAR_MIPMAP_NEAREST:9985,NEAREST_MIPMAP_LINEAR:9986,LINEAR_MIPMAP_LINEAR:9987,CLAMP_TO_EDGE:33071,MIRRORED_REPEAT:33648,REPEAT:10497},ge="KHR_mesh_quantization",L={};L[pt]=x.NEAREST;L[mt]=x.NEAREST_MIPMAP_NEAREST;L[vt]=x.NEAREST_MIPMAP_LINEAR;L[yt]=x.LINEAR;L[xt]=x.LINEAR_MIPMAP_NEAREST;L[Tt]=x.LINEAR_MIPMAP_LINEAR;L[bt]=x.CLAMP_TO_EDGE;L[wt]=x.REPEAT;L[St]=x.MIRRORED_REPEAT;const Ee={scale:"scale",position:"translation",quaternion:"rotation",morphTargetInfluences:"weights"},rs=new at,Ie=12,os=1179937895,as=2,Re=8,ls=1313821514,cs=5130562;function q(s,e){return s.length===e.length&&s.every(function(t,i){return t===e[i]})}function us(s){return new TextEncoder().encode(s).buffer}function fs(s){return q(s.elements,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}function ds(s,e,t){const i={min:new Array(s.itemSize).fill(Number.POSITIVE_INFINITY),max:new Array(s.itemSize).fill(Number.NEGATIVE_INFINITY)};for(let n=e;n<e+t;n++)for(let o=0;o<s.itemSize;o++){let r;s.itemSize>4?r=s.array[n*s.itemSize+o]:(o===0?r=s.getX(n):o===1?r=s.getY(n):o===2?r=s.getZ(n):o===3&&(r=s.getW(n)),s.normalized===!0&&(r=me.normalize(r,s.array))),i.min[o]=Math.min(i.min[o],r),i.max[o]=Math.max(i.max[o],r)}return i}function je(s){return Math.ceil(s/4)*4}function pe(s,e=0){const t=je(s.byteLength);if(t!==s.byteLength){const i=new Uint8Array(t);if(i.set(new Uint8Array(s)),e!==0)for(let n=s.byteLength;n<t;n++)i[n]=e;return i.buffer}return s}function Ae(){return typeof document>"u"&&typeof OffscreenCanvas<"u"?new OffscreenCanvas(1,1):document.createElement("canvas")}function Ne(s,e){if(s.toBlob!==void 0)return new Promise(i=>s.toBlob(i,e));let t;return e==="image/jpeg"?t=.92:e==="image/webp"&&(t=.8),s.convertToBlob({type:e,quality:t})}class hs{constructor(){this.plugins=[],this.options={},this.pending=[],this.buffers=[],this.byteOffset=0,this.buffers=[],this.nodeMap=new Map,this.skins=[],this.extensionsUsed={},this.extensionsRequired={},this.uids=new Map,this.uid=0,this.json={asset:{version:"2.0",generator:"THREE.GLTFExporter"}},this.cache={meshes:new Map,attributes:new Map,attributesNormalized:new Map,materials:new Map,textures:new Map,images:new Map}}setPlugins(e){this.plugins=e}async write(e,t,i={}){this.options=Object.assign({binary:!1,trs:!1,onlyVisible:!0,maxTextureSize:1/0,animations:[],includeCustomExtensions:!1},i),this.options.animations.length>0&&(this.options.trs=!0),this.processInput(e),await Promise.all(this.pending);const n=this,o=n.buffers,r=n.json;i=n.options;const a=n.extensionsUsed,l=n.extensionsRequired,c=new Blob(o,{type:"application/octet-stream"}),f=Object.keys(a),d=Object.keys(l);if(f.length>0&&(r.extensionsUsed=f),d.length>0&&(r.extensionsRequired=d),r.buffers&&r.buffers.length>0&&(r.buffers[0].byteLength=c.size),i.binary===!0){const m=new FileReader;m.readAsArrayBuffer(c),m.onloadend=function(){const u=pe(m.result),g=new DataView(new ArrayBuffer(Re));g.setUint32(0,u.byteLength,!0),g.setUint32(4,cs,!0);const h=pe(us(JSON.stringify(r)),32),w=new DataView(new ArrayBuffer(Re));w.setUint32(0,h.byteLength,!0),w.setUint32(4,ls,!0);const y=new ArrayBuffer(Ie),E=new DataView(y);E.setUint32(0,os,!0),E.setUint32(4,as,!0);const v=Ie+w.byteLength+h.byteLength+g.byteLength+u.byteLength;E.setUint32(8,v,!0);const b=new Blob([y,w,h,g,u],{type:"application/octet-stream"}),_=new FileReader;_.readAsArrayBuffer(b),_.onloadend=function(){t(_.result)}}}else if(r.buffers&&r.buffers.length>0){const m=new FileReader;m.readAsDataURL(c),m.onloadend=function(){const u=m.result;r.buffers[0].uri=u,t(r)}}else t(r)}serializeUserData(e,t){if(Object.keys(e.userData).length===0)return;const i=this.options,n=this.extensionsUsed;try{const o=JSON.parse(JSON.stringify(e.userData));if(i.includeCustomExtensions&&o.gltfExtensions){t.extensions===void 0&&(t.extensions={});for(const r in o.gltfExtensions)t.extensions[r]=o.gltfExtensions[r],n[r]=!0;delete o.gltfExtensions}Object.keys(o).length>0&&(t.extras=o)}catch(o){console.warn("THREE.GLTFExporter: userData of '"+e.name+"' won't be serialized because of JSON.stringify error - "+o.message)}}getUID(e,t=!1){if(this.uids.has(e)===!1){const n=new Map;n.set(!0,this.uid++),n.set(!1,this.uid++),this.uids.set(e,n)}return this.uids.get(e).get(t)}isNormalizedNormalAttribute(e){if(this.cache.attributesNormalized.has(e))return!1;const i=new Te;for(let n=0,o=e.count;n<o;n++)if(Math.abs(i.fromBufferAttribute(e,n).length()-1)>5e-4)return!1;return!0}createNormalizedNormalAttribute(e){const t=this.cache;if(t.attributesNormalized.has(e))return t.attributesNormalized.get(e);const i=e.clone(),n=new Te;for(let o=0,r=i.count;o<r;o++)n.fromBufferAttribute(i,o),n.x===0&&n.y===0&&n.z===0?n.setX(1):n.normalize(),i.setXYZ(o,n.x,n.y,n.z);return t.attributesNormalized.set(e,i),i}applyTextureTransform(e,t){let i=!1;const n={};(t.offset.x!==0||t.offset.y!==0)&&(n.offset=t.offset.toArray(),i=!0),t.rotation!==0&&(n.rotation=t.rotation,i=!0),(t.repeat.x!==1||t.repeat.y!==1)&&(n.scale=t.repeat.toArray(),i=!0),i&&(e.extensions=e.extensions||{},e.extensions.KHR_texture_transform=n,this.extensionsUsed.KHR_texture_transform=!0)}buildMetalRoughTexture(e,t){if(e===t)return e;function i(u){return u.colorSpace===Fe?function(h){return h<.04045?h*.0773993808:Math.pow(h*.9478672986+.0521327014,2.4)}:function(h){return h}}console.warn("THREE.GLTFExporter: Merged metalnessMap and roughnessMap textures."),e instanceof le&&(e=he(e)),t instanceof le&&(t=he(t));const n=e?e.image:null,o=t?t.image:null,r=Math.max(n?n.width:0,o?o.width:0),a=Math.max(n?n.height:0,o?o.height:0),l=Ae();l.width=r,l.height=a;const c=l.getContext("2d");c.fillStyle="#00ffff",c.fillRect(0,0,r,a);const f=c.getImageData(0,0,r,a);if(n){c.drawImage(n,0,0,r,a);const u=i(e),g=c.getImageData(0,0,r,a).data;for(let h=2;h<g.length;h+=4)f.data[h]=u(g[h]/256)*256}if(o){c.drawImage(o,0,0,r,a);const u=i(t),g=c.getImageData(0,0,r,a).data;for(let h=1;h<g.length;h+=4)f.data[h]=u(g[h]/256)*256}c.putImageData(f,0,0);const m=(e||t).clone();return m.source=new lt(l),m.colorSpace=ct,m.channel=(e||t).channel,e&&t&&e.channel!==t.channel&&console.warn("THREE.GLTFExporter: UV channels for metalnessMap and roughnessMap textures must match."),m}processBuffer(e){const t=this.json,i=this.buffers;return t.buffers||(t.buffers=[{byteLength:0}]),i.push(e),0}processBufferView(e,t,i,n,o){const r=this.json;r.bufferViews||(r.bufferViews=[]);let a;switch(t){case x.BYTE:case x.UNSIGNED_BYTE:a=1;break;case x.SHORT:case x.UNSIGNED_SHORT:a=2;break;default:a=4}const l=je(n*e.itemSize*a),c=new DataView(new ArrayBuffer(l));let f=0;for(let u=i;u<i+n;u++)for(let g=0;g<e.itemSize;g++){let h;e.itemSize>4?h=e.array[u*e.itemSize+g]:(g===0?h=e.getX(u):g===1?h=e.getY(u):g===2?h=e.getZ(u):g===3&&(h=e.getW(u)),e.normalized===!0&&(h=me.normalize(h,e.array))),t===x.FLOAT?c.setFloat32(f,h,!0):t===x.INT?c.setInt32(f,h,!0):t===x.UNSIGNED_INT?c.setUint32(f,h,!0):t===x.SHORT?c.setInt16(f,h,!0):t===x.UNSIGNED_SHORT?c.setUint16(f,h,!0):t===x.BYTE?c.setInt8(f,h):t===x.UNSIGNED_BYTE&&c.setUint8(f,h),f+=a}const d={buffer:this.processBuffer(c.buffer),byteOffset:this.byteOffset,byteLength:l};return o!==void 0&&(d.target=o),o===x.ARRAY_BUFFER&&(d.byteStride=e.itemSize*a),this.byteOffset+=l,r.bufferViews.push(d),{id:r.bufferViews.length-1,byteLength:0}}processBufferViewImage(e){const t=this,i=t.json;return i.bufferViews||(i.bufferViews=[]),new Promise(function(n){const o=new FileReader;o.readAsArrayBuffer(e),o.onloadend=function(){const r=pe(o.result),a={buffer:t.processBuffer(r),byteOffset:t.byteOffset,byteLength:r.byteLength};t.byteOffset+=r.byteLength,n(i.bufferViews.push(a)-1)}})}processAccessor(e,t,i,n){const o=this.json,r={1:"SCALAR",2:"VEC2",3:"VEC3",4:"VEC4",9:"MAT3",16:"MAT4"};let a;if(e.array.constructor===Float32Array)a=x.FLOAT;else if(e.array.constructor===Int32Array)a=x.INT;else if(e.array.constructor===Uint32Array)a=x.UNSIGNED_INT;else if(e.array.constructor===Int16Array)a=x.SHORT;else if(e.array.constructor===Uint16Array)a=x.UNSIGNED_SHORT;else if(e.array.constructor===Int8Array)a=x.BYTE;else if(e.array.constructor===Uint8Array)a=x.UNSIGNED_BYTE;else throw new Error("THREE.GLTFExporter: Unsupported bufferAttribute component type: "+e.array.constructor.name);if(i===void 0&&(i=0),n===void 0&&(n=e.count),n===0)return null;const l=ds(e,i,n);let c;t!==void 0&&(c=e===t.index?x.ELEMENT_ARRAY_BUFFER:x.ARRAY_BUFFER);const f=this.processBufferView(e,a,i,n,c),d={bufferView:f.id,byteOffset:f.byteOffset,componentType:a,count:n,max:l.max,min:l.min,type:r[e.itemSize]};return e.normalized===!0&&(d.normalized=!0),o.accessors||(o.accessors=[]),o.accessors.push(d)-1}processImage(e,t,i,n="image/png"){if(e!==null){const o=this,r=o.cache,a=o.json,l=o.options,c=o.pending;r.images.has(e)||r.images.set(e,{});const f=r.images.get(e),d=n+":flipY/"+i.toString();if(f[d]!==void 0)return f[d];a.images||(a.images=[]);const m={mimeType:n},u=Ae();u.width=Math.min(e.width,l.maxTextureSize),u.height=Math.min(e.height,l.maxTextureSize);const g=u.getContext("2d");if(i===!0&&(g.translate(0,u.height),g.scale(1,-1)),e.data!==void 0){t!==ut&&console.error("GLTFExporter: Only RGBAFormat is supported.",t),(e.width>l.maxTextureSize||e.height>l.maxTextureSize)&&console.warn("GLTFExporter: Image size is bigger than maxTextureSize",e);const w=new Uint8ClampedArray(e.height*e.width*4);for(let y=0;y<w.length;y+=4)w[y+0]=e.data[y+0],w[y+1]=e.data[y+1],w[y+2]=e.data[y+2],w[y+3]=e.data[y+3];g.putImageData(new ImageData(w,e.width,e.height),0,0)}else g.drawImage(e,0,0,u.width,u.height);l.binary===!0?c.push(Ne(u,n).then(w=>o.processBufferViewImage(w)).then(w=>{m.bufferView=w})):u.toDataURL!==void 0?m.uri=u.toDataURL(n):c.push(Ne(u,n).then(w=>new FileReader().readAsDataURL(w)).then(w=>{m.uri=w}));const h=a.images.push(m)-1;return f[d]=h,h}else throw new Error("THREE.GLTFExporter: No valid image data found. Unable to process texture.")}processSampler(e){const t=this.json;t.samplers||(t.samplers=[]);const i={magFilter:L[e.magFilter],minFilter:L[e.minFilter],wrapS:L[e.wrapS],wrapT:L[e.wrapT]};return t.samplers.push(i)-1}processTexture(e){const i=this.options,n=this.cache,o=this.json;if(n.textures.has(e))return n.textures.get(e);o.textures||(o.textures=[]),e instanceof le&&(e=he(e,i.maxTextureSize));let r=e.userData.mimeType;r==="image/webp"&&(r="image/png");const a={sampler:this.processSampler(e),source:this.processImage(e.image,e.format,e.flipY,r)};e.name&&(a.name=e.name),this._invokeAll(function(c){c.writeTexture&&c.writeTexture(e,a)});const l=o.textures.push(a)-1;return n.textures.set(e,l),l}processMaterial(e){const t=this.cache,i=this.json;if(t.materials.has(e))return t.materials.get(e);if(e.isShaderMaterial)return console.warn("GLTFExporter: THREE.ShaderMaterial not supported."),null;i.materials||(i.materials=[]);const n={pbrMetallicRoughness:{}};e.isMeshStandardMaterial!==!0&&e.isMeshBasicMaterial!==!0&&console.warn("GLTFExporter: Use MeshStandardMaterial or MeshBasicMaterial for best results.");const o=e.color.toArray().concat([e.opacity]);if(q(o,[1,1,1,1])||(n.pbrMetallicRoughness.baseColorFactor=o),e.isMeshStandardMaterial?(n.pbrMetallicRoughness.metallicFactor=e.metalness,n.pbrMetallicRoughness.roughnessFactor=e.roughness):(n.pbrMetallicRoughness.metallicFactor=.5,n.pbrMetallicRoughness.roughnessFactor=.5),e.metalnessMap||e.roughnessMap){const a=this.buildMetalRoughTexture(e.metalnessMap,e.roughnessMap),l={index:this.processTexture(a),channel:a.channel};this.applyTextureTransform(l,a),n.pbrMetallicRoughness.metallicRoughnessTexture=l}if(e.map){const a={index:this.processTexture(e.map),texCoord:e.map.channel};this.applyTextureTransform(a,e.map),n.pbrMetallicRoughness.baseColorTexture=a}if(e.emissive){const a=e.emissive;if(Math.max(a.r,a.g,a.b)>0&&(n.emissiveFactor=e.emissive.toArray()),e.emissiveMap){const c={index:this.processTexture(e.emissiveMap),texCoord:e.emissiveMap.channel};this.applyTextureTransform(c,e.emissiveMap),n.emissiveTexture=c}}if(e.normalMap){const a={index:this.processTexture(e.normalMap),texCoord:e.normalMap.channel};e.normalScale&&e.normalScale.x!==1&&(a.scale=e.normalScale.x),this.applyTextureTransform(a,e.normalMap),n.normalTexture=a}if(e.aoMap){const a={index:this.processTexture(e.aoMap),texCoord:e.aoMap.channel};e.aoMapIntensity!==1&&(a.strength=e.aoMapIntensity),this.applyTextureTransform(a,e.aoMap),n.occlusionTexture=a}e.transparent?n.alphaMode="BLEND":e.alphaTest>0&&(n.alphaMode="MASK",n.alphaCutoff=e.alphaTest),e.side===ft&&(n.doubleSided=!0),e.name!==""&&(n.name=e.name),this.serializeUserData(e,n),this._invokeAll(function(a){a.writeMaterial&&a.writeMaterial(e,n)});const r=i.materials.push(n)-1;return t.materials.set(e,r),r}processMesh(e){const t=this.cache,i=this.json,n=[e.geometry.uuid];if(Array.isArray(e.material))for(let v=0,b=e.material.length;v<b;v++)n.push(e.material[v].uuid);else n.push(e.material.uuid);const o=n.join(":");if(t.meshes.has(o))return t.meshes.get(o);const r=e.geometry;let a;e.isLineSegments?a=x.LINES:e.isLineLoop?a=x.LINE_LOOP:e.isLine?a=x.LINE_STRIP:e.isPoints?a=x.POINTS:a=e.material.wireframe?x.LINES:x.TRIANGLES;const l={},c={},f=[],d=[],m={uv:"TEXCOORD_0",uv1:"TEXCOORD_1",color:"COLOR_0",skinWeight:"WEIGHTS_0",skinIndex:"JOINTS_0"},u=r.getAttribute("normal");u!==void 0&&!this.isNormalizedNormalAttribute(u)&&(console.warn("THREE.GLTFExporter: Creating normalized normal attribute from the non-normalized one."),r.setAttribute("normal",this.createNormalizedNormalAttribute(u)));let g=null;for(let v in r.attributes){if(v.slice(0,5)==="morph")continue;const b=r.attributes[v];if(v=m[v]||v.toUpperCase(),/^(POSITION|NORMAL|TANGENT|TEXCOORD_\d+|COLOR_\d+|JOINTS_\d+|WEIGHTS_\d+)$/.test(v)||(v="_"+v),t.attributes.has(this.getUID(b))){c[v]=t.attributes.get(this.getUID(b));continue}g=null;const I=b.array;v==="JOINTS_0"&&!(I instanceof Uint16Array)&&!(I instanceof Uint8Array)&&(console.warn('GLTFExporter: Attribute "skinIndex" converted to type UNSIGNED_SHORT.'),g=new Z(new Uint16Array(I),b.itemSize,b.normalized));const A=this.processAccessor(g||b,r);A!==null&&(v.startsWith("_")||this.detectMeshQuantization(v,b),c[v]=A,t.attributes.set(this.getUID(b),A))}if(u!==void 0&&r.setAttribute("normal",u),Object.keys(c).length===0)return null;if(e.morphTargetInfluences!==void 0&&e.morphTargetInfluences.length>0){const v=[],b=[],_={};if(e.morphTargetDictionary!==void 0)for(const I in e.morphTargetDictionary)_[e.morphTargetDictionary[I]]=I;for(let I=0;I<e.morphTargetInfluences.length;++I){const A={};let X=!1;for(const z in r.morphAttributes){if(z!=="position"&&z!=="normal"){X||(console.warn("GLTFExporter: Only POSITION and NORMAL morph are supported."),X=!0);continue}const U=r.morphAttributes[z][I],G=z.toUpperCase(),T=r.attributes[z];if(t.attributes.has(this.getUID(U,!0))){A[G]=t.attributes.get(this.getUID(U,!0));continue}const M=U.clone();if(!r.morphTargetsRelative)for(let S=0,J=U.count;S<J;S++)for(let P=0;P<U.itemSize;P++)P===0&&M.setX(S,U.getX(S)-T.getX(S)),P===1&&M.setY(S,U.getY(S)-T.getY(S)),P===2&&M.setZ(S,U.getZ(S)-T.getZ(S)),P===3&&M.setW(S,U.getW(S)-T.getW(S));A[G]=this.processAccessor(M,r),t.attributes.set(this.getUID(T,!0),A[G])}d.push(A),v.push(e.morphTargetInfluences[I]),e.morphTargetDictionary!==void 0&&b.push(_[I])}l.weights=v,b.length>0&&(l.extras={},l.extras.targetNames=b)}const h=Array.isArray(e.material);if(h&&r.groups.length===0)return null;const w=h?e.material:[e.material],y=h?r.groups:[{materialIndex:0,start:void 0,count:void 0}];for(let v=0,b=y.length;v<b;v++){const _={mode:a,attributes:c};if(this.serializeUserData(r,_),d.length>0&&(_.targets=d),r.index!==null){let A=this.getUID(r.index);(y[v].start!==void 0||y[v].count!==void 0)&&(A+=":"+y[v].start+":"+y[v].count),t.attributes.has(A)?_.indices=t.attributes.get(A):(_.indices=this.processAccessor(r.index,r,y[v].start,y[v].count),t.attributes.set(A,_.indices)),_.indices===null&&delete _.indices}const I=this.processMaterial(w[y[v].materialIndex]);I!==null&&(_.material=I),f.push(_)}l.primitives=f,i.meshes||(i.meshes=[]),this._invokeAll(function(v){v.writeMesh&&v.writeMesh(e,l)});const E=i.meshes.push(l)-1;return t.meshes.set(o,E),E}detectMeshQuantization(e,t){if(this.extensionsUsed[ge])return;let i;switch(t.array.constructor){case Int8Array:i="byte";break;case Uint8Array:i="unsigned byte";break;case Int16Array:i="short";break;case Uint16Array:i="unsigned short";break;default:return}t.normalized&&(i+=" normalized");const n=e.split("_",1)[0];_e[n]&&_e[n].includes(i)&&(this.extensionsUsed[ge]=!0,this.extensionsRequired[ge]=!0)}processCamera(e){const t=this.json;t.cameras||(t.cameras=[]);const i=e.isOrthographicCamera,n={type:i?"orthographic":"perspective"};return i?n.orthographic={xmag:e.right*2,ymag:e.top*2,zfar:e.far<=0?.001:e.far,znear:e.near<0?0:e.near}:n.perspective={aspectRatio:e.aspect,yfov:me.degToRad(e.fov),zfar:e.far<=0?.001:e.far,znear:e.near<0?0:e.near},e.name!==""&&(n.name=e.type),t.cameras.push(n)-1}processAnimation(e,t){const i=this.json,n=this.nodeMap;i.animations||(i.animations=[]),e=xe.Utils.mergeMorphTargetTracks(e.clone(),t);const o=e.tracks,r=[],a=[];for(let l=0;l<o.length;++l){const c=o[l],f=ne.parseTrackName(c.name);let d=ne.findNode(t,f.nodeName);const m=Ee[f.propertyName];if(f.objectName==="bones"&&(d.isSkinnedMesh===!0?d=d.skeleton.getBoneByName(f.objectIndex):d=void 0),!d||!m)return console.warn('THREE.GLTFExporter: Could not export animation track "%s".',c.name),null;const u=1;let g=c.values.length/c.times.length;m===Ee.morphTargetInfluences&&(g/=d.morphTargetInfluences.length);let h;c.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline===!0?(h="CUBICSPLINE",g/=3):c.getInterpolation()===dt?h="STEP":h="LINEAR",a.push({input:this.processAccessor(new Z(c.times,u)),output:this.processAccessor(new Z(c.values,g)),interpolation:h}),r.push({sampler:a.length-1,target:{node:n.get(d),path:m}})}return i.animations.push({name:e.name||"clip_"+i.animations.length,samplers:a,channels:r}),i.animations.length-1}processSkin(e){const t=this.json,i=this.nodeMap,n=t.nodes[i.get(e)],o=e.skeleton;if(o===void 0)return null;const r=e.skeleton.bones[0];if(r===void 0)return null;const a=[],l=new Float32Array(o.bones.length*16),c=new ht;for(let d=0;d<o.bones.length;++d)a.push(i.get(o.bones[d])),c.copy(o.boneInverses[d]),c.multiply(e.bindMatrix).toArray(l,d*16);return t.skins===void 0&&(t.skins=[]),t.skins.push({inverseBindMatrices:this.processAccessor(new Z(l,16)),joints:a,skeleton:i.get(r)}),n.skin=t.skins.length-1}processNode(e){const t=this.json,i=this.options,n=this.nodeMap;t.nodes||(t.nodes=[]);const o={};if(i.trs){const a=e.quaternion.toArray(),l=e.position.toArray(),c=e.scale.toArray();q(a,[0,0,0,1])||(o.rotation=a),q(l,[0,0,0])||(o.translation=l),q(c,[1,1,1])||(o.scale=c)}else e.matrixAutoUpdate&&e.updateMatrix(),fs(e.matrix)===!1&&(o.matrix=e.matrix.elements);if(e.name!==""&&(o.name=String(e.name)),this.serializeUserData(e,o),e.isMesh||e.isLine||e.isPoints){const a=this.processMesh(e);a!==null&&(o.mesh=a)}else e.isCamera&&(o.camera=this.processCamera(e));if(e.isSkinnedMesh&&this.skins.push(e),e.children.length>0){const a=[];for(let l=0,c=e.children.length;l<c;l++){const f=e.children[l];if(f.visible||i.onlyVisible===!1){const d=this.processNode(f);d!==null&&a.push(d)}}a.length>0&&(o.children=a)}this._invokeAll(function(a){a.writeNode&&a.writeNode(e,o)});const r=t.nodes.push(o)-1;return n.set(e,r),r}processScene(e){const t=this.json,i=this.options;t.scenes||(t.scenes=[],t.scene=0);const n={};e.name!==""&&(n.name=e.name),t.scenes.push(n);const o=[];for(let r=0,a=e.children.length;r<a;r++){const l=e.children[r];if(l.visible||i.onlyVisible===!1){const c=this.processNode(l);c!==null&&o.push(c)}}o.length>0&&(n.nodes=o),this.serializeUserData(e,n)}processObjects(e){const t=new se;t.name="AuxScene";for(let i=0;i<e.length;i++)t.children.push(e[i]);this.processScene(t)}processInput(e){const t=this.options;e=e instanceof Array?e:[e],this._invokeAll(function(n){n.beforeParse&&n.beforeParse(e)});const i=[];for(let n=0;n<e.length;n++)e[n]instanceof se?this.processScene(e[n]):i.push(e[n]);i.length>0&&this.processObjects(i);for(let n=0;n<this.skins.length;++n)this.processSkin(this.skins[n]);for(let n=0;n<t.animations.length;++n)this.processAnimation(t.animations[n],e[0]);this._invokeAll(function(n){n.afterParse&&n.afterParse(e)})}_invokeAll(e){for(let t=0,i=this.plugins.length;t<i;t++)e(this.plugins[t])}}class gs{constructor(e){this.writer=e,this.name="KHR_lights_punctual"}writeNode(e,t){if(!e.isLight)return;if(!e.isDirectionalLight&&!e.isPointLight&&!e.isSpotLight){console.warn("THREE.GLTFExporter: Only directional, point, and spot lights are supported.",e);return}const i=this.writer,n=i.json,o=i.extensionsUsed,r={};e.name&&(r.name=e.name),r.color=e.color.toArray(),r.intensity=e.intensity,e.isDirectionalLight?r.type="directional":e.isPointLight?(r.type="point",e.distance>0&&(r.range=e.distance)):e.isSpotLight&&(r.type="spot",e.distance>0&&(r.range=e.distance),r.spot={},r.spot.innerConeAngle=(e.penumbra-1)*e.angle*-1,r.spot.outerConeAngle=e.angle),e.decay!==void 0&&e.decay!==2&&console.warn("THREE.GLTFExporter: Light decay may be lost. glTF is physically-based, and expects light.decay=2."),e.target&&(e.target.parent!==e||e.target.position.x!==0||e.target.position.y!==0||e.target.position.z!==-1)&&console.warn("THREE.GLTFExporter: Light direction may be lost. For best results, make light.target a child of the light with position 0,0,-1."),o[this.name]||(n.extensions=n.extensions||{},n.extensions[this.name]={lights:[]},o[this.name]=!0);const a=n.extensions[this.name].lights;a.push(r),t.extensions=t.extensions||{},t.extensions[this.name]={light:a.length-1}}}class ps{constructor(e){this.writer=e,this.name="KHR_materials_unlit"}writeMaterial(e,t){if(!e.isMeshBasicMaterial)return;const n=this.writer.extensionsUsed;t.extensions=t.extensions||{},t.extensions[this.name]={},n[this.name]=!0,t.pbrMetallicRoughness.metallicFactor=0,t.pbrMetallicRoughness.roughnessFactor=.9}}class ms{constructor(e){this.writer=e,this.name="KHR_materials_clearcoat"}writeMaterial(e,t){if(!e.isMeshPhysicalMaterial||e.clearcoat===0)return;const i=this.writer,n=i.extensionsUsed,o={};if(o.clearcoatFactor=e.clearcoat,e.clearcoatMap){const r={index:i.processTexture(e.clearcoatMap),texCoord:e.clearcoatMap.channel};i.applyTextureTransform(r,e.clearcoatMap),o.clearcoatTexture=r}if(o.clearcoatRoughnessFactor=e.clearcoatRoughness,e.clearcoatRoughnessMap){const r={index:i.processTexture(e.clearcoatRoughnessMap),texCoord:e.clearcoatRoughnessMap.channel};i.applyTextureTransform(r,e.clearcoatRoughnessMap),o.clearcoatRoughnessTexture=r}if(e.clearcoatNormalMap){const r={index:i.processTexture(e.clearcoatNormalMap),texCoord:e.clearcoatNormalMap.channel};i.applyTextureTransform(r,e.clearcoatNormalMap),o.clearcoatNormalTexture=r}t.extensions=t.extensions||{},t.extensions[this.name]=o,n[this.name]=!0}}class vs{constructor(e){this.writer=e,this.name="KHR_materials_iridescence"}writeMaterial(e,t){if(!e.isMeshPhysicalMaterial||e.iridescence===0)return;const i=this.writer,n=i.extensionsUsed,o={};if(o.iridescenceFactor=e.iridescence,e.iridescenceMap){const r={index:i.processTexture(e.iridescenceMap),texCoord:e.iridescenceMap.channel};i.applyTextureTransform(r,e.iridescenceMap),o.iridescenceTexture=r}if(o.iridescenceIor=e.iridescenceIOR,o.iridescenceThicknessMinimum=e.iridescenceThicknessRange[0],o.iridescenceThicknessMaximum=e.iridescenceThicknessRange[1],e.iridescenceThicknessMap){const r={index:i.processTexture(e.iridescenceThicknessMap),texCoord:e.iridescenceThicknessMap.channel};i.applyTextureTransform(r,e.iridescenceThicknessMap),o.iridescenceThicknessTexture=r}t.extensions=t.extensions||{},t.extensions[this.name]=o,n[this.name]=!0}}class ys{constructor(e){this.writer=e,this.name="KHR_materials_transmission"}writeMaterial(e,t){if(!e.isMeshPhysicalMaterial||e.transmission===0)return;const i=this.writer,n=i.extensionsUsed,o={};if(o.transmissionFactor=e.transmission,e.transmissionMap){const r={index:i.processTexture(e.transmissionMap),texCoord:e.transmissionMap.channel};i.applyTextureTransform(r,e.transmissionMap),o.transmissionTexture=r}t.extensions=t.extensions||{},t.extensions[this.name]=o,n[this.name]=!0}}class xs{constructor(e){this.writer=e,this.name="KHR_materials_volume"}writeMaterial(e,t){if(!e.isMeshPhysicalMaterial||e.transmission===0)return;const i=this.writer,n=i.extensionsUsed,o={};if(o.thicknessFactor=e.thickness,e.thicknessMap){const r={index:i.processTexture(e.thicknessMap),texCoord:e.thicknessMap.channel};i.applyTextureTransform(r,e.thicknessMap),o.thicknessTexture=r}o.attenuationDistance=e.attenuationDistance,o.attenuationColor=e.attenuationColor.toArray(),t.extensions=t.extensions||{},t.extensions[this.name]=o,n[this.name]=!0}}class Ts{constructor(e){this.writer=e,this.name="KHR_materials_ior"}writeMaterial(e,t){if(!e.isMeshPhysicalMaterial||e.ior===1.5)return;const n=this.writer.extensionsUsed,o={};o.ior=e.ior,t.extensions=t.extensions||{},t.extensions[this.name]=o,n[this.name]=!0}}class bs{constructor(e){this.writer=e,this.name="KHR_materials_specular"}writeMaterial(e,t){if(!e.isMeshPhysicalMaterial||e.specularIntensity===1&&e.specularColor.equals(rs)&&!e.specularIntensityMap&&!e.specularColorTexture)return;const i=this.writer,n=i.extensionsUsed,o={};if(e.specularIntensityMap){const r={index:i.processTexture(e.specularIntensityMap),texCoord:e.specularIntensityMap.channel};i.applyTextureTransform(r,e.specularIntensityMap),o.specularTexture=r}if(e.specularColorMap){const r={index:i.processTexture(e.specularColorMap),texCoord:e.specularColorMap.channel};i.applyTextureTransform(r,e.specularColorMap),o.specularColorTexture=r}o.specularFactor=e.specularIntensity,o.specularColorFactor=e.specularColor.toArray(),t.extensions=t.extensions||{},t.extensions[this.name]=o,n[this.name]=!0}}class ws{constructor(e){this.writer=e,this.name="KHR_materials_sheen"}writeMaterial(e,t){if(!e.isMeshPhysicalMaterial||e.sheen==0)return;const i=this.writer,n=i.extensionsUsed,o={};if(e.sheenRoughnessMap){const r={index:i.processTexture(e.sheenRoughnessMap),texCoord:e.sheenRoughnessMap.channel};i.applyTextureTransform(r,e.sheenRoughnessMap),o.sheenRoughnessTexture=r}if(e.sheenColorMap){const r={index:i.processTexture(e.sheenColorMap),texCoord:e.sheenColorMap.channel};i.applyTextureTransform(r,e.sheenColorMap),o.sheenColorTexture=r}o.sheenRoughnessFactor=e.sheenRoughness,o.sheenColorFactor=e.sheenColor.toArray(),t.extensions=t.extensions||{},t.extensions[this.name]=o,n[this.name]=!0}}class Ss{constructor(e){this.writer=e,this.name="KHR_materials_anisotropy"}writeMaterial(e,t){if(!e.isMeshPhysicalMaterial||e.anisotropy==0)return;const i=this.writer,n=i.extensionsUsed,o={};if(e.anisotropyMap){const r={index:i.processTexture(e.anisotropyMap)};i.applyTextureTransform(r,e.anisotropyMap),o.anisotropyTexture=r}o.anisotropyStrength=e.anisotropy,o.anisotropyRotation=e.anisotropyRotation,t.extensions=t.extensions||{},t.extensions[this.name]=o,n[this.name]=!0}}class Ms{constructor(e){this.writer=e,this.name="KHR_materials_emissive_strength"}writeMaterial(e,t){if(!e.isMeshStandardMaterial||e.emissiveIntensity===1)return;const n=this.writer.extensionsUsed,o={};o.emissiveStrength=e.emissiveIntensity,t.extensions=t.extensions||{},t.extensions[this.name]=o,n[this.name]=!0}}xe.Utils={insertKeyframe:function(s,e){const i=s.getValueSize(),n=new s.TimeBufferType(s.times.length+1),o=new s.ValueBufferType(s.values.length+i),r=s.createInterpolant(new s.ValueBufferType(i));let a;if(s.times.length===0){n[0]=e;for(let l=0;l<i;l++)o[l]=0;a=0}else if(e<s.times[0]){if(Math.abs(s.times[0]-e)<.001)return 0;n[0]=e,n.set(s.times,1),o.set(r.evaluate(e),0),o.set(s.values,i),a=0}else if(e>s.times[s.times.length-1]){if(Math.abs(s.times[s.times.length-1]-e)<.001)return s.times.length-1;n[n.length-1]=e,n.set(s.times,0),o.set(s.values,0),o.set(r.evaluate(e),s.values.length),a=n.length-1}else for(let l=0;l<s.times.length;l++){if(Math.abs(s.times[l]-e)<.001)return l;if(s.times[l]<e&&s.times[l+1]>e){n.set(s.times.slice(0,l+1),0),n[l+1]=e,n.set(s.times.slice(l+1),l+2),o.set(s.values.slice(0,(l+1)*i),0),o.set(r.evaluate(e),(l+1)*i),o.set(s.values.slice((l+1)*i),(l+2)*i),a=l+1;break}}return s.times=n,s.values=o,a},mergeMorphTargetTracks:function(s,e){const t=[],i={},n=s.tracks;for(let o=0;o<n.length;++o){let r=n[o];const a=ne.parseTrackName(r.name),l=ne.findNode(e,a.nodeName);if(a.propertyName!=="morphTargetInfluences"||a.propertyIndex===void 0){t.push(r);continue}if(r.createInterpolant!==r.InterpolantFactoryMethodDiscrete&&r.createInterpolant!==r.InterpolantFactoryMethodLinear){if(r.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline)throw new Error("THREE.GLTFExporter: Cannot merge tracks with glTF CUBICSPLINE interpolation.");console.warn("THREE.GLTFExporter: Morph target interpolation mode not yet supported. Using LINEAR instead."),r=r.clone(),r.setInterpolation(gt)}const c=l.morphTargetInfluences.length,f=l.morphTargetDictionary[a.propertyIndex];if(f===void 0)throw new Error("THREE.GLTFExporter: Morph target name not found: "+a.propertyIndex);let d;if(i[l.uuid]===void 0){d=r.clone();const u=new d.ValueBufferType(c*d.times.length);for(let g=0;g<d.times.length;g++)u[g*c+f]=d.values[g];d.name=(a.nodeName||"")+".morphTargetInfluences",d.values=u,i[l.uuid]=d,t.push(d);continue}const m=r.createInterpolant(new r.ValueBufferType(1));d=i[l.uuid];for(let u=0;u<d.times.length;u++)d.values[u*c+f]=m.evaluate(d.times[u]);for(let u=0;u<r.times.length;u++){const g=this.insertKeyframe(d,r.times[u]);d.values[g*c+f]=r.values[u]}}return s.tracks=t,s}};async function _s(){const s=Yt();console.log("download",s.meshName);const e=s.meshName.split("/").pop();if(!e)return;const t=Mt(s.mesh);if(!t)return;const{skyMesh:i}=Wt(t),n=await qt(i),o=new se;o.add(n);const r=new xe,a={binary:!0};r.parse(o,l=>{console.log("download GLTF:",l);const c=document.createElement("a"),f=new Blob([l],{type:"model/gltf-binary"});c.href=URL.createObjectURL(f),c.download=`${e}.gltf`,c.click()},console.error,a)}const Ke=k({text:String,...j(),...ye()},"VToolbarTitle"),Ye=F()({name:"VToolbarTitle",props:Ke(),setup(s,e){let{slots:t}=e;return V(()=>{const i=!!(t.default||t.text||s.text);return p(s.tag,{class:["v-toolbar-title",s.class],style:s.style},{default:()=>{var n;return[i&&p("div",{class:"v-toolbar-title__placeholder"},[t.text?t.text():s.text,(n=t.default)==null?void 0:n.call(t)])]}})}),{}}}),Es=k({disabled:Boolean,group:Boolean,hideOnLeave:Boolean,leaveAbsolute:Boolean,mode:String,origin:String},"transition");function C(s,e,t){return F()({name:s,props:Es({mode:t,origin:e}),setup(i,n){let{slots:o}=n;const r={onBeforeEnter(a){i.origin&&(a.style.transformOrigin=i.origin)},onLeave(a){if(i.leaveAbsolute){const{offsetTop:l,offsetLeft:c,offsetWidth:f,offsetHeight:d}=a;a._transitionInitialStyles={position:a.style.position,top:a.style.top,left:a.style.left,width:a.style.width,height:a.style.height},a.style.position="absolute",a.style.top=`${l}px`,a.style.left=`${c}px`,a.style.width=`${f}px`,a.style.height=`${d}px`}i.hideOnLeave&&a.style.setProperty("display","none","important")},onAfterLeave(a){if(i.leaveAbsolute&&(a!=null&&a._transitionInitialStyles)){const{position:l,top:c,left:f,width:d,height:m}=a._transitionInitialStyles;delete a._transitionInitialStyles,a.style.position=l||"",a.style.top=c||"",a.style.left=f||"",a.style.width=d||"",a.style.height=m||""}}};return()=>{const a=i.group?_t:ve;return oe(a,{name:i.disabled?"":s,css:!i.disabled,...i.group?void 0:{mode:i.mode},...i.disabled?{}:r},o.default)}}})}function We(s,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"in-out";return F()({name:s,props:{mode:{type:String,default:t},disabled:Boolean},setup(i,n){let{slots:o}=n;return()=>oe(ve,{name:i.disabled?"":s,css:!i.disabled,...i.disabled?{}:e},o.default)}})}function qe(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";const t=(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1)?"width":"height",i=Be(`offset-${t}`);return{onBeforeEnter(r){r._parent=r.parentNode,r._initialStyle={transition:r.style.transition,overflow:r.style.overflow,[t]:r.style[t]}},onEnter(r){const a=r._initialStyle;r.style.setProperty("transition","none","important"),r.style.overflow="hidden";const l=`${r[i]}px`;r.style[t]="0",r.offsetHeight,r.style.transition=a.transition,s&&r._parent&&r._parent.classList.add(s),requestAnimationFrame(()=>{r.style[t]=l})},onAfterEnter:o,onEnterCancelled:o,onLeave(r){r._initialStyle={transition:"",overflow:r.style.overflow,[t]:r.style[t]},r.style.overflow="hidden",r.style[t]=`${r[i]}px`,r.offsetHeight,requestAnimationFrame(()=>r.style[t]="0")},onAfterLeave:n,onLeaveCancelled:n};function n(r){s&&r._parent&&r._parent.classList.remove(s),o(r)}function o(r){const a=r._initialStyle[t];r.style.overflow=r._initialStyle.overflow,a!=null&&(r.style[t]=a),delete r._initialStyle}}C("fab-transition","center center","out-in");C("dialog-bottom-transition");C("dialog-top-transition");C("fade-transition");C("scale-transition");C("scroll-x-transition");C("scroll-x-reverse-transition");C("scroll-y-transition");C("scroll-y-reverse-transition");C("slide-x-transition");C("slide-x-reverse-transition");C("slide-y-transition");C("slide-y-reverse-transition");const Is=We("expand-transition",qe());We("expand-x-transition",qe("",!0));function Rs(s){return{aspectStyles:R(()=>{const e=Number(s.aspectRatio);return e?{paddingBottom:String(1/e*100)+"%"}:void 0})}}const $e=k({aspectRatio:[String,Number],contentClass:String,inline:Boolean,...j(),...Xt()},"VResponsive"),Le=F()({name:"VResponsive",props:$e(),setup(s,e){let{slots:t}=e;const{aspectStyles:i}=Rs(s),{dimensionStyles:n}=Jt(s);return V(()=>{var o;return p("div",{class:["v-responsive",{"v-responsive--inline":s.inline},s.class],style:[n.value,s.style]},[p("div",{class:"v-responsive__sizer",style:i.value},null),(o=t.additional)==null?void 0:o.call(t),t.default&&p("div",{class:["v-responsive__content",s.contentClass]},[t.default()])])}),{}}}),As=k({transition:{type:[Boolean,String,Object],default:"fade-transition",validator:s=>s!==!0}},"transition"),te=(s,e)=>{let{slots:t}=e;const{transition:i,disabled:n,...o}=s,{component:r=ve,...a}=typeof i=="object"?i:{};return oe(r,ae(typeof i=="string"?{name:n?"":i}:a,o,{disabled:n}),t)};function Ns(s,e){if(!Pe)return;const t=e.modifiers||{},i=e.value,{handler:n,options:o}=typeof i=="object"?i:{handler:i,options:{}},r=new IntersectionObserver(function(){var d;let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],l=arguments.length>1?arguments[1]:void 0;const c=(d=s._observe)==null?void 0:d[e.instance.$.uid];if(!c)return;const f=a.some(m=>m.isIntersecting);n&&(!t.quiet||c.init)&&(!t.once||f||c.init)&&n(f,a,l),f&&t.once?Xe(s,e):c.init=!0},o);s._observe=Object(s._observe),s._observe[e.instance.$.uid]={init:!1,observer:r},r.observe(s)}function Xe(s,e){var i;const t=(i=s._observe)==null?void 0:i[e.instance.$.uid];t&&(t.observer.unobserve(s),delete s._observe[e.instance.$.uid])}const Ls={mounted:Ns,unmounted:Xe},Cs=Ls,Us=k({alt:String,cover:Boolean,color:String,draggable:{type:[Boolean,String],default:void 0},eager:Boolean,gradient:String,lazySrc:String,options:{type:Object,default:()=>({root:void 0,rootMargin:void 0,threshold:void 0})},sizes:String,src:{type:[String,Object],default:""},crossorigin:String,referrerpolicy:String,srcset:String,position:String,...$e(),...j(),...Ve(),...As()},"VImg"),Bs=F()({name:"VImg",directives:{intersect:Cs},props:Us(),emits:{loadstart:s=>!0,load:s=>!0,error:s=>!0},setup(s,e){let{emit:t,slots:i}=e;const{backgroundColorClasses:n,backgroundColorStyles:o}=Ge(ie(s,"color")),{roundedClasses:r}=He(s),a=Et("VImg"),l=N(""),c=$(),f=N(s.eager?"loading":"idle"),d=N(),m=N(),u=R(()=>s.src&&typeof s.src=="object"?{src:s.src.src,srcset:s.srcset||s.src.srcset,lazySrc:s.lazySrc||s.src.lazySrc,aspect:Number(s.aspectRatio||s.src.aspect||0)}:{src:s.src,srcset:s.srcset,lazySrc:s.lazySrc,aspect:Number(s.aspectRatio||0)}),g=R(()=>u.value.aspect||d.value/m.value||0);D(()=>s.src,()=>{h(f.value!=="idle")}),D(g,(T,M)=>{!T&&M&&c.value&&b(c.value)}),It(()=>h());function h(T){if(!(s.eager&&T)&&!(Pe&&!T&&!s.eager)){if(f.value="loading",u.value.lazySrc){const M=new Image;M.src=u.value.lazySrc,b(M,null)}u.value.src&&Rt(()=>{var M;t("loadstart",((M=c.value)==null?void 0:M.currentSrc)||u.value.src),setTimeout(()=>{var S;if(!a.isUnmounted)if((S=c.value)!=null&&S.complete){if(c.value.naturalWidth||y(),f.value==="error")return;g.value||b(c.value,null),f.value==="loading"&&w()}else g.value||b(c.value),E()})})}}function w(){var T;a.isUnmounted||(E(),b(c.value),f.value="loaded",t("load",((T=c.value)==null?void 0:T.currentSrc)||u.value.src))}function y(){var T;a.isUnmounted||(f.value="error",t("error",((T=c.value)==null?void 0:T.currentSrc)||u.value.src))}function E(){const T=c.value;T&&(l.value=T.currentSrc||T.src)}let v=-1;ke(()=>{clearTimeout(v)});function b(T){let M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:100;const S=()=>{if(clearTimeout(v),a.isUnmounted)return;const{naturalHeight:J,naturalWidth:P}=T;J||P?(d.value=P,m.value=J):!T.complete&&f.value==="loading"&&M!=null?v=window.setTimeout(S,M):(T.currentSrc.endsWith(".svg")||T.currentSrc.startsWith("data:image/svg+xml"))&&(d.value=1,m.value=1)};S()}const _=R(()=>({"v-img__img--cover":s.cover,"v-img__img--contain":!s.cover})),I=()=>{var S;if(!u.value.src||f.value==="idle")return null;const T=p("img",{class:["v-img__img",_.value],style:{objectPosition:s.position},src:u.value.src,srcset:u.value.srcset,alt:s.alt,crossorigin:s.crossorigin,referrerpolicy:s.referrerpolicy,draggable:s.draggable,sizes:s.sizes,ref:c,onLoad:w,onError:y},null),M=(S=i.sources)==null?void 0:S.call(i);return p(te,{transition:s.transition,appear:!0},{default:()=>[be(M?p("picture",{class:"v-img__picture"},[M,T]):T,[[Lt,f.value==="loaded"]])]})},A=()=>p(te,{transition:s.transition},{default:()=>[u.value.lazySrc&&f.value!=="loaded"&&p("img",{class:["v-img__img","v-img__img--preload",_.value],style:{objectPosition:s.position},src:u.value.lazySrc,alt:s.alt,crossorigin:s.crossorigin,referrerpolicy:s.referrerpolicy,draggable:s.draggable},null)]}),X=()=>i.placeholder?p(te,{transition:s.transition,appear:!0},{default:()=>[(f.value==="loading"||f.value==="error"&&!i.error)&&p("div",{class:"v-img__placeholder"},[i.placeholder()])]}):null,z=()=>i.error?p(te,{transition:s.transition,appear:!0},{default:()=>[f.value==="error"&&p("div",{class:"v-img__error"},[i.error()])]}):null,U=()=>s.gradient?p("div",{class:"v-img__gradient",style:{backgroundImage:`linear-gradient(${s.gradient})`}},null):null,G=N(!1);{const T=D(g,M=>{M&&(requestAnimationFrame(()=>{requestAnimationFrame(()=>{G.value=!0})}),T())})}return V(()=>{const T=Le.filterProps(s);return be(p(Le,ae({class:["v-img",{"v-img--booting":!G.value},n.value,r.value,s.class],style:[{width:K(s.width==="auto"?d.value:s.width)},o.value,s.style]},T,{aspectRatio:g.value,"aria-label":s.alt,role:s.alt?"img":void 0}),{additional:()=>p(Nt,null,[p(I,null,null),p(A,null,null),p(U,null,null),p(X,null,null),p(z,null,null)]),default:i.default}),[[At("intersect"),{handler:h,options:s.options},null,{once:!0}]])}),{currentSrc:l,image:c,state:f,naturalWidth:d,naturalHeight:m}}}),Fs=[null,"prominent","default","comfortable","compact"],Je=k({absolute:Boolean,collapse:Boolean,color:String,density:{type:String,default:"default",validator:s=>Fs.includes(s)},extended:Boolean,extensionHeight:{type:[Number,String],default:48},flat:Boolean,floating:Boolean,height:{type:[Number,String],default:64},image:String,title:String,...Zt(),...j(),...Qt(),...Ve(),...ye({tag:"header"}),...Ct()},"VToolbar"),Ce=F()({name:"VToolbar",props:Je(),setup(s,e){var u;let{slots:t}=e;const{backgroundColorClasses:i,backgroundColorStyles:n}=Ge(ie(s,"color")),{borderClasses:o}=es(s),{elevationClasses:r}=ts(s),{roundedClasses:a}=He(s),{themeClasses:l}=Ut(s),{rtlClasses:c}=Bt(),f=N(!!(s.extended||(u=t.extension)!=null&&u.call(t))),d=R(()=>parseInt(Number(s.height)+(s.density==="prominent"?Number(s.height):0)-(s.density==="comfortable"?8:0)-(s.density==="compact"?16:0),10)),m=R(()=>f.value?parseInt(Number(s.extensionHeight)+(s.density==="prominent"?Number(s.extensionHeight):0)-(s.density==="comfortable"?4:0)-(s.density==="compact"?8:0),10):0);return Ft({VBtn:{variant:"text"}}),V(()=>{var y;const g=!!(s.title||t.title),h=!!(t.image||s.image),w=(y=t.extension)==null?void 0:y.call(t);return f.value=!!(s.extended||w),p(s.tag,{class:["v-toolbar",{"v-toolbar--absolute":s.absolute,"v-toolbar--collapse":s.collapse,"v-toolbar--flat":s.flat,"v-toolbar--floating":s.floating,[`v-toolbar--density-${s.density}`]:!0},i.value,o.value,r.value,a.value,l.value,c.value,s.class],style:[n.value,s.style]},{default:()=>[h&&p("div",{key:"image",class:"v-toolbar__image"},[t.image?p(fe,{key:"image-defaults",disabled:!s.image,defaults:{VImg:{cover:!0,src:s.image}}},t.image):p(Bs,{key:"image-img",cover:!0,src:s.image},null)]),p(fe,{defaults:{VTabs:{height:K(d.value)}}},{default:()=>{var E,v,b;return[p("div",{class:"v-toolbar__content",style:{height:K(d.value)}},[t.prepend&&p("div",{class:"v-toolbar__prepend"},[(E=t.prepend)==null?void 0:E.call(t)]),g&&p(Ye,{key:"title",text:s.title},{text:t.title}),(v=t.default)==null?void 0:v.call(t),t.append&&p("div",{class:"v-toolbar__append"},[(b=t.append)==null?void 0:b.call(t)])])]}}),p(fe,{defaults:{VTabs:{height:K(m.value)}}},{default:()=>[p(Is,null,{default:()=>[f.value&&p("div",{class:"v-toolbar__extension",style:{height:K(m.value)}},[w])]})]})]})}),{contentHeight:d,extensionHeight:m}}}),Ps=k({scrollTarget:{type:String},scrollThreshold:{type:[String,Number],default:300}},"scroll");function ks(s){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{canScroll:t}=e;let i=0;const n=$(null),o=N(0),r=N(0),a=N(0),l=N(!1),c=N(!1),f=R(()=>Number(s.scrollThreshold)),d=R(()=>Pt((f.value-o.value)/f.value||0)),m=()=>{const u=n.value;!u||t&&!t.value||(i=o.value,o.value="window"in u?u.pageYOffset:u.scrollTop,c.value=o.value<i,a.value=Math.abs(o.value-f.value))};return D(c,()=>{r.value=r.value||o.value}),D(l,()=>{r.value=0}),Oe(()=>{D(()=>s.scrollTarget,u=>{var h;const g=u?document.querySelector(u):window;g&&g!==n.value&&((h=n.value)==null||h.removeEventListener("scroll",m),n.value=g,n.value.addEventListener("scroll",m,{passive:!0}))},{immediate:!0})}),ke(()=>{var u;(u=n.value)==null||u.removeEventListener("scroll",m)}),t&&D(t,m,{immediate:!0}),{scrollThreshold:f,currentScroll:o,currentThreshold:a,isScrollActive:l,scrollRatio:d,isScrollingUp:c,savedScroll:r}}function Ze(){const s=N(!1);return Oe(()=>{window.requestAnimationFrame(()=>{s.value=!0})}),{ssrBootStyles:R(()=>s.value?void 0:{transition:"none !important"}),isBooted:kt(s)}}const Os=k({scrollBehavior:String,modelValue:{type:Boolean,default:!0},location:{type:String,default:"top",validator:s=>["top","bottom"].includes(s)},...Je(),...Ot(),...Ps(),height:{type:[Number,String],default:64}},"VAppBar"),zs=F()({name:"VAppBar",props:Os(),emits:{"update:modelValue":s=>!0},setup(s,e){let{slots:t}=e;const i=$(),n=zt(s,"modelValue"),o=R(()=>{var E;const y=new Set(((E=s.scrollBehavior)==null?void 0:E.split(" "))??[]);return{hide:y.has("hide"),inverted:y.has("inverted"),collapse:y.has("collapse"),elevate:y.has("elevate"),fadeImage:y.has("fade-image")}}),r=R(()=>{const y=o.value;return y.hide||y.inverted||y.collapse||y.elevate||y.fadeImage||!n.value}),{currentScroll:a,scrollThreshold:l,isScrollingUp:c,scrollRatio:f}=ks(s,{canScroll:r}),d=R(()=>s.collapse||o.value.collapse&&(o.value.inverted?f.value>0:f.value===0)),m=R(()=>s.flat||o.value.elevate&&(o.value.inverted?a.value>0:a.value===0)),u=R(()=>o.value.fadeImage?o.value.inverted?1-f.value:f.value:void 0),g=R(()=>{var v,b;if(o.value.hide&&o.value.inverted)return 0;const y=((v=i.value)==null?void 0:v.contentHeight)??0,E=((b=i.value)==null?void 0:b.extensionHeight)??0;return y+E});Dt(R(()=>!!s.scrollBehavior),()=>{Gt(()=>{o.value.hide?o.value.inverted?n.value=a.value>l.value:n.value=c.value||a.value<l.value:n.value=!0})});const{ssrBootStyles:h}=Ze(),{layoutItemStyles:w}=Vt({id:s.name,order:R(()=>parseInt(s.order,10)),position:ie(s,"location"),layoutSize:g,elementSize:N(void 0),active:n,absolute:ie(s,"absolute")});return V(()=>{const y=Ce.filterProps(s);return p(Ce,ae({ref:i,class:["v-app-bar",{"v-app-bar--bottom":s.location==="bottom"},s.class],style:[{...w.value,"--v-toolbar-image-opacity":u.value,height:void 0,...h.value},s.style]},y,{collapse:d.value,flat:m.value}),t)}),{}}}),Ds=F()({name:"VAppBarTitle",props:Ke(),setup(s,e){let{slots:t}=e;return V(()=>p(Ye,ae(s,{class:"v-app-bar-title"}),t)),{}}}),Vs={class:"d-none d-sm-inline"},Gs={class:"text-grey pl-2"},Hs=ze({__name:"application-bar",setup(s){const e=Ue(),t=$t();return(i,n)=>(Y(),W(zs,{elevation:0,color:"#2220",density:"compact"},{default:re(()=>[p(Ds,{class:"title"},{default:re(()=>[B(t).showSidebar?(Y(),W(O,{key:0,icon:"mdi-chevron-left",onClick:n[0]||(n[0]=()=>B(t).showSidebar=!1),variant:"tonal",density:"comfortable"})):ce("",!0),B(t).showSidebar?(Y(),W(O,{key:1,icon:"mdi-download",variant:"tonal",density:"comfortable",class:"ml-4",onClick:n[1]||(n[1]=()=>B(_s)())})):ce("",!0),B(t).showSidebar?ce("",!0):(Y(),W(O,{key:2,icon:"mdi-chevron-right",onClick:n[2]||(n[2]=()=>B(t).showSidebar=!0),variant:"tonal",density:"comfortable"}))]),_:1}),p(Me),we("span",Vs,[Ht(ue(B(e).filename)+" ",1),we("span",Gs," ("+ue(B(e).availableFiles.length)+" / "+ue(B(e).files.length)+") ",1)]),p(Me),p(O,{density:"comfortable",icon:"mdi-import",title:"open APK"}),p(O,{density:"comfortable",icon:"mdi-image",title:"Textures",to:"ktx"}),p(O,{density:"comfortable",icon:"mdi-cube-scan",title:"Meshes",to:"mesh"}),p(O,{density:"comfortable",icon:"mdi-music",title:"Music",to:"audio"}),p(O,{density:"comfortable",icon:"mdi-cog",title:"Settings",to:"settings"})]),_:1}))}}),js=De(Hs,[["__scopeId","data-v-7fac9324"]]),Ks=k({scrollable:Boolean,...j(),...ye({tag:"main"})},"VMain"),Ys=F()({name:"VMain",props:Ks(),setup(s,e){let{slots:t}=e;const{mainStyles:i}=jt(),{ssrBootStyles:n}=Ze();return V(()=>p(s.tag,{class:["v-main",{"v-main--scrollable":s.scrollable},s.class],style:[i.value,n.value,s.style]},{default:()=>{var o,r;return[s.scrollable?p("div",{class:"v-main__scroller"},[(o=t.default)==null?void 0:o.call(t)]):(r=t.default)==null?void 0:r.call(t)]}})),{}}}),Ws=ze({__name:"default",setup(s){const e=Ue(),t=$(!1),i=$();function n(o){var r;console.log({accepted:o}),(r=i.value)==null||r.hide()}return Se(document,"dragenter",o=>{console.log("dragenter:",o),t.value=!0}),Se(document,"dragend",o=>{console.log("dragend:",o),t.value=!1}),(o,r)=>{const a=js,l=ss,c=ns;return Y(),W(Ys,{class:"no-top"},{default:re(()=>[p(a),p(c,{ref_key:"overlay",ref:i,show:B(e).fileDropRequired?"show":"auto"},{default:re(()=>[p(l,{onFile:B(e).open,onDrop:n,type:"application/vnd.android.package-archive",prompt:"Drop APK here!",accept:"",reject:"Not an APK! "},null,8,["onFile"])]),_:1},8,["show"]),Kt(o.$slots,"default",{},void 0,!0)]),_:3})}}}),nn=De(Ws,[["__scopeId","data-v-a7421bbb"]]);export{nn as default};
